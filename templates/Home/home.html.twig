{% extends 'base.html.twig' %}

{% block title %}BacLab - Réussissez Votre BAC avec Confiance{% endblock %}

{% block css %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('front/css/home-redesign.css') }}">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
{% endblock %}

{% block body %}
<script>
    // Add home-page class to body for proper styling
    document.body.classList.add('home-page');
    // Force dark background immediately
    document.body.style.backgroundColor = '#0a0a0f';
    document.body.style.backgroundImage = 'none';
    
    // FontAwesome Icon Detection and Fix
    document.addEventListener('DOMContentLoaded', function() {
        // Check if FontAwesome is loaded
        const testIcon = document.createElement('i');
        testIcon.className = 'fas fa-home';
        testIcon.style.position = 'absolute';
        testIcon.style.left = '-9999px';
        document.body.appendChild(testIcon);
        
        const computedStyle = window.getComputedStyle(testIcon, ':before');
        const content = computedStyle.getPropertyValue('content');
        
        // If FontAwesome isn't loaded properly, add fallback
        if (!content || content === 'none' || content === '""') {
            console.warn('FontAwesome icons not loading properly, applying fallback...');
            
            // Add fallback CSS for icons
            const fallbackStyle = document.createElement('style');
            fallbackStyle.textContent = `
                .fas, .far, .fab, .fal {
                    font-family: "Font Awesome 5 Free", "Font Awesome 5 Brands" !important;
                    font-weight: 900 !important;
                    display: inline-block !important;
                }
                .far { font-weight: 400 !important; }
                .fab { font-family: "Font Awesome 5 Brands" !important; font-weight: 400 !important; }
            `;
            document.head.appendChild(fallbackStyle);
        }
        
        // Remove test element
        document.body.removeChild(testIcon);
    });
</script>

<style>
/* Immediate home page background fix */
body.home-page {
    background: #0a0a0f !important;
    background-image: none !important;
}

/* FontAwesome icon fix */
.fas, .far, .fab, .fal {
    font-family: "Font Awesome 5 Free" !important;
    font-weight: 900 !important;
    display: inline-block !important;
    font-style: normal !important;
}
.far { font-weight: 400 !important; }
.fab { font-family: "Font Awesome 5 Brands" !important; font-weight: 400 !important; }
</style>
<!-- Cursor Trail -->
<div class="cursor-trail" id="cursorTrail"></div>

<!-- Hero Section - ULTIMATE REDESIGN -->
<section class="hero-redesign">
    <!-- Particle System -->
    <div class="particles-container" id="particlesContainer"></div>
    
    <div class="hero-bg-animated">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
        <div class="gradient-orb orb-4"></div>
        <div class="grid-overlay"></div>
    </div>
    
    <div class="container">
        <div class="row align-items-center min-vh-100">
            <div class="col-lg-6" data-aos="fade-right" data-aos-duration="1000">
                <div class="hero-badge">
                    <span class="badge-dot"></span>
                    <span>Plateforme #1 pour le BAC en Tunisie</span>
                </div>
                
                <h1 class="hero-title">
                    Transformez Votre
                    <span class="title-highlight">Préparation au BAC</span>
                    en Succès Garanti
                </h1>
                
                <p class="hero-subtitle">
                    Rejoignez 10,000+ étudiants qui utilisent BacLab pour exceller dans leurs études 
                    et atteindre leurs objectifs académiques.
                </p>
                
                <div class="hero-stats-inline">
                    <div class="stat-inline">
                        <div class="stat-value" data-count="10000">0</div>
                        <div class="stat-label">Étudiants Actifs</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-inline">
                        <div class="stat-value" data-count="95">0</div>
                        <div class="stat-label">Taux de Réussite</div>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-inline">
                        <div class="stat-value" data-count="500">0</div>
                        <div class="stat-label">Ressources</div>
                    </div>
                </div>
                
                <div class="hero-cta-group">
                    {% if not app.user %}
                        <a href="{{ path('app_register') }}" class="btn-hero btn-primary">
                            <span>Commencer Gratuitement</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                        <a href="#demo" class="btn-hero btn-secondary">
                            <i class="fas fa-play"></i>
                            <span>Voir la Démo</span>
                        </a>
                    {% else %}
                        <a href="{{ path('app_dashboard') }}" class="btn-hero btn-primary">
                            <span>Mon Tableau de Bord</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                        <a href="{{ path('app_bibliotheque_index') }}" class="btn-hero btn-secondary">
                            <i class="fas fa-book"></i>
                            <span>Bibliothèque</span>
                        </a>
                    {% endif %}
                </div>
                
                <div class="trust-badges">
                    <div class="trust-item">
                        <i class="fas fa-shield-alt"></i>
                        <span>100% Gratuit</span>
                    </div>
                    <div class="trust-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Contenu Vérifié</span>
                    </div>
                    <div class="trust-item">
                        <i class="fas fa-users"></i>
                        <span>Communauté Active</span>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6" data-aos="fade-left" data-aos-duration="1000" data-aos-delay="200">
                <div class="hero-visual">
                    <div class="video-showcase">
                        <div class="video-container-modern">
                            <video id="heroVideo" preload="metadata" poster="" muted>
                                <source src="{{ asset('front/vid/0214.mp4') }}" type="video/mp4">
                            </video>
                            
                            <!-- Custom Video Controls -->
                            <div class="custom-video-controls" id="customControls">
                                <button class="play-pause-btn" id="playPauseBtn">
                                    <i class="fas fa-play" id="playPauseIcon"></i>
                                </button>
                                <div class="video-progress" id="videoProgress">
                                    <div class="video-progress-bar" id="progressBar"></div>
                                </div>
                                <div class="video-time" id="videoTime">0:00 / 0:00</div>
                            </div>
                            
                            <div class="video-play-overlay" id="playOverlay">
                                <div class="play-button-large">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="floating-badge badge-1">
                            <i class="fas fa-star"></i>
                            <div>
                                <strong>4.9/5</strong>
                                <span>Note Moyenne</span>
                            </div>
                        </div>
                        
                        <div class="floating-badge badge-2">
                            <i class="fas fa-fire"></i>
                            <div>
                                <strong>Tendance</strong>
                                <span>Cette Semaine</span>
                            </div>
                        </div>
                        
                        <div class="floating-badge badge-3">
                            <i class="fas fa-trophy"></i>
                            <div>
                                <strong>95%</strong>
                                <span>Réussite</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="scroll-indicator">
        <div class="mouse">
            <div class="wheel"></div>
        </div>
        <span>Scroll</span>
    </div>
</section>

<!-- Trust Section -->
<section class="trust-section">
    <div class="container">
        <p class="trust-title" data-aos="fade-up">Utilisé par les meilleurs étudiants de Tunisie</p>
        <div class="trust-logos" data-aos="fade-up" data-aos-delay="100">
            <div class="trust-stat">
                <i class="fas fa-graduation-cap"></i>
                <span>Toutes Filières</span>
            </div>
            <div class="trust-stat">
                <i class="fas fa-book"></i>
                <span>Toutes Matières</span>
            </div>
            <div class="trust-stat">
                <i class="fas fa-certificate"></i>
                <span>Contenu Certifié</span>
            </div>
            <div class="trust-stat">
                <i class="fas fa-clock"></i>
                <span>24/7 Disponible</span>
            </div>
        </div>
    </div>
</section>

<!-- Features Section - Redesigned -->
<section class="features-redesign" id="features">
    <div class="container">
        <div class="section-header-center" data-aos="fade-up">
            <span class="section-tag">Fonctionnalités</span>
            <h2 class="section-title-large">
                Tout ce dont vous avez besoin<br>
                pour <span class="text-gradient">réussir votre BAC</span>
            </h2>
            <p class="section-description">
                Une plateforme complète avec des outils puissants pour maximiser votre apprentissage
            </p>
        </div>
        
        <div class="features-grid">
            <div class="feature-card-modern" data-aos="fade-up" data-aos-delay="0">
                <div class="feature-icon-modern gradient-purple">
                    <i class="fas fa-book"></i>
                </div>
                <h3 class="feature-title-modern">Bibliothèque Complète</h3>
                <p class="feature-desc-modern">
                    Des milliers de cours, exercices et corrigés pour toutes les matières du BAC
                </p>
                <a href="{{ path('app_bibliotheque_index') }}" class="feature-link-modern">
                    Explorer <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="feature-card-modern" data-aos="fade-up" data-aos-delay="100">
                <div class="feature-icon-modern gradient-pink">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3 class="feature-title-modern">Quiz Interactifs</h3>
                <p class="feature-desc-modern">
                    Testez vos connaissances avec des quiz adaptés et suivez votre progression
                </p>
                <a href="{{ path('app_quiz') }}" class="feature-link-modern">
                    Commencer <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="feature-card-modern" data-aos="fade-up" data-aos-delay="200">
                <div class="feature-icon-modern gradient-blue">
                    <i class="fas fa-file"></i>
                </div>
                <h3 class="feature-title-modern">Fiches Collaboratives</h3>
                <p class="feature-desc-modern">
                    Créez et partagez des fiches de révision avec d'autres étudiants
                </p>
                <a href="{{ path('fiche_index') }}" class="feature-link-modern">
                    Découvrir <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="feature-card-modern" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-icon-modern gradient-green">
                    <i class="fas fa-users"></i>
                </div>
                <h3 class="feature-title-modern">Groupes d'Étude</h3>
                <p class="feature-desc-modern">
                    Rejoignez des groupes de révision et étudiez ensemble
                </p>
                <a href="{{ path('groupe_index') }}" class="feature-link-modern">
                    Rejoindre <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="feature-card-modern" data-aos="fade-up" data-aos-delay="400">
                <div class="feature-icon-modern gradient-orange">
                    <i class="fas fa-comments"></i>
                </div>
                <h3 class="feature-title-modern">Chat en Direct</h3>
                <p class="feature-desc-modern">
                    Obtenez de l'aide instantanée de la communauté
                </p>
                <a href="{{ path('chat_index') }}" class="feature-link-modern">
                    Discuter <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
            <div class="feature-card-modern" data-aos="fade-up" data-aos-delay="500">
                <div class="feature-icon-modern gradient-indigo">
                    <i class="fas fa-calculator"></i>
                </div>
                <h3 class="feature-title-modern">Calcul de Score</h3>
                <p class="feature-desc-modern">
                    Calculez votre score et découvrez vos options d'orientation
                </p>
                <a href="#" class="feature-link-modern">
                    Calculer <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="stats-section">
    <div class="container">
        <div class="stats-grid">
            <div class="stat-card" data-aos="zoom-in" data-aos-delay="0">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-number" data-count="10000">0</div>
                <div class="stat-label">Étudiants Inscrits</div>
            </div>
            
            <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
                <div class="stat-icon">
                    <i class="fas fa-book"></i>
                </div>
                <div class="stat-number" data-count="500">0</div>
                <div class="stat-label">Ressources Disponibles</div>
            </div>
            
            <div class="stat-card" data-aos="zoom-in" data-aos-delay="200">
                <div class="stat-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="stat-number" data-count="95">0</div>
                <div class="stat-label">Taux de Réussite</div>
            </div>
            
            <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
                <div class="stat-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="stat-number" data-count="4.9">0</div>
                <div class="stat-label">Note Moyenne</div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section class="how-it-works-section">
    <div class="container">
        <div class="section-header-center" data-aos="fade-up">
            <span class="section-tag">Comment ça marche</span>
            <h2 class="section-title-large">
                Votre parcours vers le <span class="text-gradient">succès</span><br>
                en 3 étapes simples
            </h2>
            <p class="section-description">
                Un processus simple et efficace pour maximiser votre préparation au BAC
            </p>
        </div>
        
        <div class="steps-container">
            <div class="step-item" data-aos="fade-up" data-aos-delay="0">
                <div class="step-number">01</div>
                <div class="step-content">
                    <div class="step-icon gradient-blue">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3 class="step-title">Créez votre compte</h3>
                    <p class="step-description">
                        Inscrivez-vous gratuitement et accédez immédiatement à toutes nos ressources
                    </p>
                </div>
                <div class="step-connector"></div>
            </div>
            
            <div class="step-item" data-aos="fade-up" data-aos-delay="200">
                <div class="step-number">02</div>
                <div class="step-content">
                    <div class="step-icon gradient-purple">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3 class="step-title">Étudiez et pratiquez</h3>
                    <p class="step-description">
                        Utilisez nos cours, quiz et fiches pour réviser efficacement
                    </p>
                </div>
                <div class="step-connector"></div>
            </div>
            
            <div class="step-item" data-aos="fade-up" data-aos-delay="400">
                <div class="step-number">03</div>
                <div class="step-content">
                    <div class="step-icon gradient-green">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h3 class="step-title">Réussissez votre BAC</h3>
                    <p class="step-description">
                        Atteignez vos objectifs avec confiance et excellez dans vos examens
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Subject Areas Section -->
<section class="subjects-section">
    <div class="container">
        <div class="section-header-center" data-aos="fade-up">
            <span class="section-tag">Matières</span>
            <h2 class="section-title-large">
                Toutes les <span class="text-gradient">matières</span><br>
                du BAC couvertes
            </h2>
            <p class="section-description">
                Des ressources complètes pour chaque filière et matière
            </p>
        </div>
        
        <div class="subjects-grid">
            <div class="subject-card" data-aos="fade-up" data-aos-delay="0">
                <div class="subject-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <h3 class="subject-title">Mathématiques</h3>
                <p class="subject-description">Algèbre, géométrie, analyse et probabilités</p>
                <div class="subject-stats">
                    <span><i class="fas fa-file"></i> 120+ cours</span>
                    <span><i class="fas fa-question-circle"></i> 500+ exercices</span>
                </div>
            </div>
            
            <div class="subject-card" data-aos="fade-up" data-aos-delay="100">
                <div class="subject-icon">
                    <i class="fas fa-flask"></i>
                </div>
                <h3 class="subject-title">Sciences</h3>
                <p class="subject-description">Physique, chimie et sciences naturelles</p>
                <div class="subject-stats">
                    <span><i class="fas fa-file"></i> 95+ cours</span>
                    <span><i class="fas fa-question-circle"></i> 400+ exercices</span>
                </div>
            </div>
            
            <div class="subject-card" data-aos="fade-up" data-aos-delay="200">
                <div class="subject-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h3 class="subject-title">Langues</h3>
                <p class="subject-description">Français, anglais et arabe</p>
                <div class="subject-stats">
                    <span><i class="fas fa-file"></i> 80+ cours</span>
                    <span><i class="fas fa-question-circle"></i> 300+ exercices</span>
                </div>
            </div>
            
            <div class="subject-card" data-aos="fade-up" data-aos-delay="300">
                <div class="subject-icon">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <h3 class="subject-title">Économie</h3>
                <p class="subject-description">Économie générale et gestion</p>
                <div class="subject-stats">
                    <span><i class="fas fa-file"></i> 70+ cours</span>
                    <span><i class="fas fa-question-circle"></i> 250+ exercices</span>
                </div>
            </div>
            
            <div class="subject-card" data-aos="fade-up" data-aos-delay="400">
                <div class="subject-icon">
                    <i class="fas fa-laptop"></i>
                </div>
                <h3 class="subject-title">Informatique</h3>
                <p class="subject-description">Programmation et algorithmique</p>
                <div class="subject-stats">
                    <span><i class="fas fa-file"></i> 60+ cours</span>
                    <span><i class="fas fa-question-circle"></i> 200+ exercices</span>
                </div>
            </div>
            
            <div class="subject-card" data-aos="fade-up" data-aos-delay="500">
                <div class="subject-icon">
                    <i class="fas fa-globe"></i>
                </div>
                <h3 class="subject-title">Autres</h3>
                <p class="subject-description">Histoire, géographie et philosophie</p>
                <div class="subject-stats">
                    <span><i class="fas fa-file"></i> 90+ cours</span>
                    <span><i class="fas fa-question-circle"></i> 350+ exercices</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials Section - Redesigned -->
<section class="testimonials-redesign">
    <div class="container">
        <div class="section-header-center" data-aos="fade-up">
            <span class="section-tag">Témoignages</span>
            <h2 class="section-title-large">
                Ce que disent nos <span class="text-gradient">étudiants</span>
            </h2>
        </div>
        
        <div class="testimonials-grid">
            <div class="testimonial-card-modern" data-aos="fade-up" data-aos-delay="0">
                <div class="testimonial-rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p class="testimonial-quote">
                    "BacLab m'a aidé à obtenir 18/20 au BAC! Les quiz interactifs sont géniaux et la communauté est très active."
                </p>
                <div class="testimonial-author">
                    <div class="author-avatar">A</div>
                    <div class="author-info">
                        <div class="author-name">Ahmed Ben Ali</div>
                        <div class="author-role">BAC Sciences 2024</div>
                    </div>
                </div>
            </div>
            
            <div class="testimonial-card-modern" data-aos="fade-up" data-aos-delay="100">
                <div class="testimonial-rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p class="testimonial-quote">
                    "La communauté est incroyable! J'ai trouvé un groupe d'étude qui m'a beaucoup aidé dans ma préparation."
                </p>
                <div class="testimonial-author">
                    <div class="author-avatar">S</div>
                    <div class="author-info">
                        <div class="author-name">Sarah Mansour</div>
                        <div class="author-role">BAC Math 2024</div>
                    </div>
                </div>
            </div>
            
            <div class="testimonial-card-modern" data-aos="fade-up" data-aos-delay="200">
                <div class="testimonial-rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                </div>
                <p class="testimonial-quote">
                    "Les fiches collaboratives sont parfaites pour réviser rapidement. Interface intuitive et contenu de qualité!"
                </p>
                <div class="testimonial-author">
                    <div class="author-avatar">M</div>
                    <div class="author-info">
                        <div class="author-name">Mohamed Trabelsi</div>
                        <div class="author-role">BAC Économie 2024</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section">
    <div class="container">
        <div class="section-header-center" data-aos="fade-up">
            <span class="section-tag">FAQ</span>
            <h2 class="section-title-large">
                Questions <span class="text-gradient">fréquentes</span>
            </h2>
            <p class="section-description">
                Trouvez rapidement les réponses à vos questions
            </p>
        </div>
        
        <div class="faq-container">
            <div class="faq-item" data-aos="fade-up" data-aos-delay="0">
                <div class="faq-question">
                    <h3>BacLab est-il vraiment gratuit ?</h3>
                    <i class="fas fa-plus faq-icon"></i>
                </div>
                <div class="faq-answer">
                    <p>Oui, BacLab est 100% gratuit ! Vous avez accès à toutes nos ressources, quiz, fiches collaboratives et fonctionnalités communautaires sans aucun frais.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="100">
                <div class="faq-question">
                    <h3>Quelles filières sont couvertes ?</h3>
                    <i class="fas fa-plus faq-icon"></i>
                </div>
                <div class="faq-answer">
                    <p>Nous couvrons toutes les filières du BAC tunisien : Sciences Expérimentales, Mathématiques, Économie & Gestion, Lettres, Informatique, et bien d'autres.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="200">
                <div class="faq-question">
                    <h3>Comment puis-je rejoindre un groupe d'étude ?</h3>
                    <i class="fas fa-plus faq-icon"></i>
                </div>
                <div class="faq-answer">
                    <p>Après inscription, rendez-vous dans la section "Groupes d'Étude" pour découvrir les groupes existants ou créer le vôtre. Vous pouvez filtrer par filière et matière.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="300">
                <div class="faq-question">
                    <h3>Les contenus sont-ils conformes au programme officiel ?</h3>
                    <i class="fas fa-plus faq-icon"></i>
                </div>
                <div class="faq-answer">
                    <p>Absolument ! Tous nos contenus sont créés et vérifiés par des enseignants qualifiés et sont strictement conformes au programme officiel du ministère de l'Éducation.</p>
                </div>
            </div>
            
            <div class="faq-item" data-aos="fade-up" data-aos-delay="400">
                <div class="faq-question">
                    <h3>Puis-je utiliser BacLab sur mobile ?</h3>
                    <i class="fas fa-plus faq-icon"></i>
                </div>
                <div class="faq-answer">
                    <p>Oui ! BacLab est entièrement responsive et fonctionne parfaitement sur tous les appareils : ordinateurs, tablettes et smartphones.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section - Redesigned -->
<section class="cta-redesign">
    <div class="container">
        <div class="cta-card-modern" data-aos="zoom-in">
            <div class="cta-content-modern">
                <h2 class="cta-title-modern">Prêt à transformer votre préparation au BAC?</h2>
                <p class="cta-description-modern">
                    Rejoignez des milliers d'étudiants qui ont déjà commencé leur chemin vers le succès
                </p>
                <div class="cta-buttons-modern">
                    {% if not app.user %}
                        <a href="{{ path('app_register') }}" class="btn-cta-modern btn-primary-cta">
                            <span>Commencer Gratuitement</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    {% else %}
                        <a href="{{ path('app_dashboard') }}" class="btn-cta-modern btn-primary-cta">
                            <span>Mon Tableau de Bord</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    {% endif %}
                    <a href="{{ path('app_bibliotheque_index') }}" class="btn-cta-modern btn-secondary-cta">
                        <i class="fas fa-book"></i>
                        <span>Explorer les Ressources</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block js %}
    {{ parent() }}
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            easing: 'ease-out-cubic',
            once: true,
            offset: 50
        });
        
        // ULTIMATE PARTICLE SYSTEM
        class ParticleSystem {
            constructor() {
                this.container = document.getElementById('particlesContainer');
                this.particles = [];
                this.colors = ['#00d4ff', '#b794f6', '#ff6b9d', '#667eea'];
                this.init();
            }
            
            init() {
                this.createParticles();
                setInterval(() => this.createParticle(), 300);
            }
            
            createParticles() {
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => this.createParticle(), i * 200);
                }
            }
            
            createParticle() {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.background = this.colors[Math.floor(Math.random() * this.colors.length)];
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.animationDelay = Math.random() * 2 + 's';
                
                this.container.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 20000);
            }
        }
        
        // CURSOR TRAIL EFFECT
        class CursorTrail {
            constructor() {
                this.trail = document.getElementById('cursorTrail');
                this.init();
            }
            
            init() {
                document.addEventListener('mousemove', (e) => {
                    this.trail.style.left = e.clientX - 10 + 'px';
                    this.trail.style.top = e.clientY - 10 + 'px';
                    this.trail.style.opacity = '0.8';
                });
                
                document.addEventListener('mouseleave', () => {
                    this.trail.style.opacity = '0';
                });
            }
        }
        
        // ULTIMATE VIDEO CONTROLLER
        class UltimateVideoController {
            constructor() {
                this.video = document.getElementById('heroVideo');
                this.playOverlay = document.getElementById('playOverlay');
                this.customControls = document.getElementById('customControls');
                this.playPauseBtn = document.getElementById('playPauseBtn');
                this.playPauseIcon = document.getElementById('playPauseIcon');
                this.progressBar = document.getElementById('progressBar');
                this.videoProgress = document.getElementById('videoProgress');
                this.videoTime = document.getElementById('videoTime');
                this.init();
            }
            
            init() {
                // Play overlay click
                this.playOverlay.addEventListener('click', () => {
                    this.playVideo();
                });
                
                // Play/pause button
                this.playPauseBtn.addEventListener('click', () => {
                    this.togglePlayPause();
                });
                
                // Progress bar click
                this.videoProgress.addEventListener('click', (e) => {
                    const rect = this.videoProgress.getBoundingClientRect();
                    const pos = (e.clientX - rect.left) / rect.width;
                    this.video.currentTime = pos * this.video.duration;
                });
                
                // Video events
                this.video.addEventListener('timeupdate', () => this.updateProgress());
                this.video.addEventListener('loadedmetadata', () => this.updateTime());
                this.video.addEventListener('play', () => this.onPlay());
                this.video.addEventListener('pause', () => this.onPause());
            }
            
            playVideo() {
                this.video.play();
                this.playOverlay.style.opacity = '0';
                this.playOverlay.style.pointerEvents = 'none';
            }
            
            togglePlayPause() {
                if (this.video.paused) {
                    this.video.play();
                } else {
                    this.video.pause();
                }
            }
            
            onPlay() {
                this.playPauseIcon.className = 'fas fa-pause';
            }
            
            onPause() {
                this.playPauseIcon.className = 'fas fa-play';
            }
            
            updateProgress() {
                const progress = (this.video.currentTime / this.video.duration) * 100;
                this.progressBar.style.width = progress + '%';
                this.updateTime();
            }
            
            updateTime() {
                const current = this.formatTime(this.video.currentTime);
                const duration = this.formatTime(this.video.duration);
                this.videoTime.textContent = `${current} / ${duration}`;
            }
            
            formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }
        }
        
        // Counter Animation with Enhanced Effects
        function animateCounter(element) {
            const target = parseFloat(element.getAttribute('data-count'));
            const duration = 2500;
            const increment = target / (duration / 16);
            let current = 0;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                    // Add completion effect
                    element.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        element.style.transform = 'scale(1)';
                    }, 200);
                }
                
                if (target === 4.9) {
                    element.textContent = current.toFixed(1);
                } else if (target >= 1000) {
                    element.textContent = Math.floor(current).toLocaleString() + '+';
                } else {
                    element.textContent = Math.floor(current) + '%';
                }
            }, 16);
        }
        
        // Enhanced Intersection Observer
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    if (entry.target.classList.contains('stat-number') || entry.target.classList.contains('stat-value')) {
                        animateCounter(entry.target);
                        observer.unobserve(entry.target);
                    }
                }
            });
        }, { threshold: 0.5 });
        
        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize systems
            new ParticleSystem();
            new CursorTrail();
            new UltimateVideoController();
            
            // Observe all counters
            document.querySelectorAll('.stat-number, .stat-value').forEach(el => {
                observer.observe(el);
            });
            
            // FAQ Functionality
            const faqItems = document.querySelectorAll('.faq-item');
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', () => {
                    const isActive = item.classList.contains('active');
                    
                    // Close all other FAQ items
                    faqItems.forEach(otherItem => {
                        if (otherItem !== item) {
                            otherItem.classList.remove('active');
                        }
                    });
                    
                    // Toggle current item
                    if (isActive) {
                        item.classList.remove('active');
                    } else {
                        item.classList.add('active');
                    }
                });
            });
            
            // Add smooth scroll enhancement
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href !== '#' && document.querySelector(href)) {
                        e.preventDefault();
                        document.querySelector(href).scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Add scroll-based effects
            let ticking = false;
            function updateScrollEffects() {
                const scrolled = window.pageYOffset;
                const parallax = document.querySelector('.hero-bg-animated');
                if (parallax) {
                    parallax.style.transform = `translateY(${scrolled * 0.5}px)`;
                }
                ticking = false;
            }
            
            window.addEventListener('scroll', function() {
                if (!ticking) {
                    requestAnimationFrame(updateScrollEffects);
                    ticking = true;
                }
            });
            
            // Enhanced hover effects for feature cards
            const featureCards = document.querySelectorAll('.feature-card-modern');
            featureCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-15px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
            
            // Enhanced hover effects for subject cards
            const subjectCards = document.querySelectorAll('.subject-card');
            subjectCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    const icon = this.querySelector('.subject-icon');
                    if (icon) {
                        icon.style.transform = 'scale(1.1) rotate(-5deg)';
                    }
                });
                
                card.addEventListener('mouseleave', function() {
                    const icon = this.querySelector('.subject-icon');
                    if (icon) {
                        icon.style.transform = 'scale(1) rotate(0deg)';
                    }
                });
            });
        });
    </script>
{% endblock %}
